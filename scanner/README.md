## Pluggable scanners


### Goals
- standalone
- quick to start
- language-agnostic via client stubs for other languages
- modular
- scalable, albeit as a single service for now (no time to implement/rely on queues)
- can be run as a container (kuberentes job or REST service), CLI command, or binary
- can perform long running operations
- replace current golang only approach for scanning
- ...more things to capture here

### Non-goals
- durability, scans live only for the container lifetime
  - SQLite DB can be exported as a file and reused, but did not try to make it work and probably will not to.
  It will complicate more than benefit if done.
- Replace centralized VMClarity DB for scanning results
- ...more things to capture here


## Brief overview
Golang REST server implementation will be running across all scanner types (Go, Python, Rust, etc).
Language-specific approaches will utilize the Go REST server as temporary DB and source of truth for scans (long running operations)
and their results (scan findings).
Other languages will only implement the scanner interface and interact with the REST server via client stubs (autogenerated with minimal changes) 
that will be embedded into containers (MIGHT CHANGE).
Use Golang scanner example to see how the new scanners will look like.


## Running server

```bash
$ cd scaner/golang                        # from repo root
$ export TARGETPLATFORM=linux/arm64       # whatever works for you
$ docker build . -t scanner-server        # build
$ docker run -p 8765:8765 scanner-server  # start server
```

## Running example Golang scanner
```bash
$ cd scaner/golang                        # from repo root
$ export TARGETPLATFORM=linux/arm64       # whatever works for you
$ docker build . -t scanner-server        # build
$ docker run -p 8765:8765 scanner-server  # start server
```
